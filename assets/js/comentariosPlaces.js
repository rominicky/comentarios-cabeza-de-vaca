var Places = {
  "Acay": [-25.9167,-57.15],
  "Aliaga": [40.6741,-0.7033],
  "Anco Anco": [-13.1166,-73.6904],
  "Andalucía": [37.4641,-5.3461],
  "Arellano": [42.606,-2.0465],
  "Arequipa": [-16.3982,-71.5367],
  "Argentina": [-35.3948,-65.1714],
  "Argentino reino": [-35.3948,-65.1714],
  "Argentino": [-33.6723,-58.3518],
  "Arica": [-18.478,-70.3207],
  "Arroyo San Juan": [-34.6500, -58.3700],
  "Asunción": [-25.2816,-57.6325],
  "Azores": [38.3269,-28.1409],
  "Bermejo": [-26.9317,-58.5054],
  "Bermuda": [32.3143,-64.761],
  "Brasil": [-10.7707,-53.0815],
  "buenayre": [-34.6079,-58.3732],
  "Buenos Aires": [-34.6079,-58.3732],
  "Burgos": [42.3408,-3.6997],
  "Cabo Verde": [15.9323,-23.9579],
  "Cabo Frio": [-22.8872,-42.0262],
  "caboverde": [15.9323,-23.9579],
  "Cádiz": [36.5298,-6.2946],
  "Caaguazú": [-25.4617,-56.0241],
  "Callao": [-12.0628,-77.1489],
  "Campo": [-23.0058,-59.3067],
  "Cananeia": [-25.0595,-47.9050],
  "Canaria": [27.9667,-15.6],
  "Canarias": [28.0983,-16.09],
  "canarias": [27.9667,-15.6],
  "Canària": [28.0983,-16.09],
  "Candelaria": [-21.08315,-58.7349],
  "Carcarañà": [-32.6271,-60.8366],
  "Carcarañá": [-32.6271,-60.8366],
  "Cartagena": [37.6051,-0.9862],
  "Castilla": [40.288,-5.6237],
  "Cataratas": [-25.693571,-54.4388861],
  "Cazalla": [37.931375,-5.76241],
  "cerro Potosí": [-19.5893,-65.7535],
  "Chalamarca": [-6.4914,-78.4686],
  "Charca": [-18.2813,-66.3256],
  "Charcas": [-19.0479,-65.2596],
  "Chile": [-33.4376,-70.6501],
  "Chile": [-37.7794,-71.3601],
  "China": [25.7,-99.2345],
  "China": [36.5638,103.8311],
  "Chiquitos": [-16.7872,-60.675],
  "Chiriguana": [9.3638,-73.6017],
  "Chuquiago": [-14.2943,-73.2535],
  "Chuquisaca": [-19.0333,-65.2627],
  "costa brasìlica": [-10.7707,-53.0815],
  "Cotagayta": [-20.8172,-65.6609],
  "Cuzco": [-13.5167,-71.9789],
  "Cádiz": [36.5298,-6.2946],
  "Còrdoba": [-31.4213,-64.1886],
  "Còrdoba": [37.8916,-4.7728],
  "Córdoba": [-31.4213,-64.1886],
  "Córdova": [37.8916,-4.7728],
  "de la Plata": [-33.6723,-58.3518],
  "de Plata": [-33.6723,-58.3518],
  "España": [40.2282,-3.6391],
  "Esteco": [-25.3517,-64.7839],
  "Estepa": [37.2926,-4.879],
  "Estrecho de Magallanes": [-53.1548,-70.9113],
  "Estrecho": [-53.1548,-70.9113],
  "Estrecho.": [-53.1548,-70.9113],
  "Florida": [27.5803,-80.3867],
  "Fortunadas": [28.0983,-16.09],
  "Genero": [-22.9028,-43.2075],
  "Gomera": [28.0916,-17.1133],
  "Guadalupe": [39.4508,-5.3259],
  "Guadix": [37.3402,-3.4428],
  "Guaira": [-24.0874,-54.2559],
  "Guapaí": [-17.244,-61.5057],
  "Guayaquil": [-2.1152,-79.8354],
  "Guayra": [-24.0874,-54.2559],
  "Ibiaza": [38.9088,1.433],
  "Iguazu": [-26.3657,-49.1095],
  "imperial": [-36.7389,-72.9936],
  "India": [22.5,77.5],
  "Indias": [-15.1712,-60.7894],
  "Ipananie": [-22.8,-58.8],
  "Ipaneme": [-25.458,-57.5067],
  "Ipané": [-25.458,-57.5067],
  "Ipití": [-22.1558,-64.6719],
  "Irlanda": [53.1837,-8.1467],
  "isla de Martin Garcia": [-34.1873,-58.2537],
  "isla de San Gabriel": [-34.4726,-57.8531],
  "isla San Gabriel": [-34.4726,-57.8531],
  "isla de Santiago": [15.0777,	-23.6216],
  "islas de San Lázaro": [-33.9969,-58.2841],
  "santacatalina": [-27.6037, -48.4927],
  "Itabitan":[-22.6921,-58.6684],
  "Itapuà": [-27.3236,-55.865],
  "Itapocu": [-26.5666,-48.6666],
  "Jamaíca": [18.1575,-77.3139],
  "Judea": [31.8393,34.9897],
  "La Trinidad": [-34.6131,-58.3772],
  "tucumana tierra": [-27.2171,-65.5859],
  "Lambare": [-25.3427,-57.6258],
  "Lambarè": [-25.3468,-57.6065],
  "Lambaré": [-25.3468,-57.6065],
  "Lerma": [-24.9816,-65.5795],
  "Lima": [-12.0467,-77.03],
  "LISBOA": [39.0011,-9.1715],
  "Lisboa": [39.0011,-9.1715],
  "Lora": [42.7496981,-7.788889],
  "Madrid": [40.4165,-3.7026],
  "Málaga": [36.7213,-4.4214],
  "Palencia": [42.0166,-4.5333],
  "Portugal": [39.5964,-8.4703],
  "Potosì": [-19.5893,-65.7535],
  "Potosí": [-19.5893,-65.7535],
  "Puerto Guayviano": [-22.3098,-58.5420],
  "Puerto de la Candelaria": [-21.08315,-58.7349],
  "Puerto de las Piedras": [-24.01000,-57.967333],
  "puerto de Santos": [-23.5475,-46.6361],
  "puerto de Vera": [-27.2481,-50.4858],
  "Puerto los Reyes": [-18.0000,-57.2500],
  "Puerto Jejui": [-24.1181368,-57.0968478],
  "Puerto Pico": [40.6572,-4.6995],
  "Puna": [-2.7391,-79.9096],
  "Puná": [-2.7391,-79.9096],
  "Quito": [-0.2202,-78.5121],
  "Rio de la Plata": [-33.6723,-58.3518],
  "rio Argentino": [-33.6723,-58.3518],
  "rio de Genero": [-22.9028,-43.2075],
  "rio de Jeniero": [-22.9028,-43.2075],
  "riodelaplata": [-34.6079,	-58.3732],
  "Rio de la Plata": [-33.6723,-58.3518],
  "rio de la Plata": [-33.6723,-58.3518],
  "rio Genéro": [-22.9028,-43.2075],
  "Rio Janeiro": [-22.9028,-43.2075],
  "rio Juan de Ayolas": [-27.4,-56.9],
  "rio Juan de Oyolas": [-27.4,-56.9],
  "Rio Negro": [-32.7835,-57.4285],
  "Rio Taquari": [-19.0560683,-57.3232817],
  "Rio Tibagi": [-24.8802,-50.2050],
  "Roca": [-10.2383,-77.2113],
  "Roma": [41.8926,12.4843],
  "S. Gabriel": [-34.4726,-57.8531],
  "San Fernando": [-27.4511,-58.9866],
  "San Francisco": [-16.7999,-64.8435],
  "San Francisco": [-33.2027,-63.8602],
  "São Francisco do Sul": [-26.2912,-48.6296],
  "San Gabriel": [-34.4726,-57.8531],
  "San Lucar": [36.7781,-6.3515],
  "San Salvador": [-31.6249,-58.5052],
  "San Salvador": [-33.6723,-58.3518],
  "San Sebastian": [-12.0437,-77.0367],
  "San Vicente": [-23.9631,-46.3919],
  "San Vicente": [-35.0248,-58.424],
  "San Vicente": [14.9459,120.7485],
  "Santa Catalina": [-27.5967,-48.5492],
  "Santa Ana": [-27.3692,-55.5817],
  "Santa Catalina": [-27.5967,-48.5492],
  "Santa Cruz de la Sierra": [-17.754,-62.9972],
  "Santa Cruz": [-17.754,-62.9972],
  "Santa Cruz": [-6.6255,-78.9457],
  "Santa Fè": [-31.1145,-60.5818],
  "Santa Fé": [-31.1145,-60.5818],
  "Santa Maria": [-34.6627,-54.1645],
  "Santa-Fé": [-31.1145,-60.5818],
  "Santa Fé": [-31.1145,-60.5818],
  "Santiago de Chile": [-33.4376,-70.6501],
  "Santiago": [-27.141,-56.7653],
  "Santiago": [14.9167,-23.6167],
  "Santiago": [40.6461,-7.4821],
  "Santo Domingo": [-34.0903,-70.7607],
  "Santos": [-23.9608,-46.3336],
  "Sevilla": [37.3828,-5.9732],
  "Sierra Verzocana": [39.4765,-6.3722],
  "sierras de Altamira": [39.8581,-4.0226],
  "Spiritu Santo": [-24.2814,-47.4597],
  "Tafetana": [28.4682,-16.2546],
  "Tajo": [39.664,-7.5404],
  "Tapúa":[-25.1683,-57.4941],
  "Tebas": [38.325,23.3189],
  "Teide": [28.4682,-16.2546],
  "Ternate": [14.2897,120.7168],
  "Tidore": [-8.1213,111.7212],
  "Toledo": [39.8581,-4.0226],
  "Toledo": [39.9648,-4.1263],
  "Tomina": [-19.1853,-64.4614],
  "torre de Mambrós": [40.0312,-6.0884],
  "Trujillo": [39.4606,-5.8819],
  "Tucuman": [-26.9503,-65.3665],
  "Tucuman": [-27.2171,-65.5859],
  "Uruguay": [-32.4866,-58.2476],
  "Uruguay": [-32.8048,-56.0114],
  "Valencia": [39.4753,-0.3756],
  "Valladolid": [41.6522,-4.7286],
  "Vandalia": [38.9606,-89.0937],
  "Verde": [15.9323,-23.9579],
  "Vilcabamba": [-17.8165,-66.1665],
  "villa de Oropesa": [-12.7878,-74.9731],
  "Villuerca": [39.4765,-6.3722],
  "Xarahicejo": [39.6662,-5.8131],
  "Yumiri": [-27.5967,-48.5492],
  "Yumirì": [-27.5967,-48.5492]
};

var currentMap = null;

function showMap(placeKey) {
  if (Places[placeKey]) {
    const coordinates = Places[placeKey];
    const mapContainer = document.getElementById('map');

    if (!mapContainer) {
      console.error("Contenedor de mapa no encontrado.");
      return;
    }

    // Mostrar y limpiar
    mapContainer.style.display = "block";
    mapContainer.innerHTML = "";

    // Crear nuevo mapa
    currentMap = L.map(mapContainer).setView(coordinates, 10);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(currentMap);

    L.marker(coordinates).addTo(currentMap)
      .bindPopup(`<b>${placeKey}</b><br>Coordenadas: ${coordinates[0]}, ${coordinates[1]}`)
      .openPopup();
  } else {
    console.log("Lugar no encontrado:", placeKey);
  }
}

function hideMap() {
  const mapContainer = document.getElementById('map');
  if (mapContainer) {
    mapContainer.style.display = "none";
    mapContainer.innerHTML = "";
    if (currentMap) {
      currentMap.remove();
      currentMap = null;
    }
  }
}

document.addEventListener('DOMContentLoaded', () => {
  const items = document.querySelectorAll('.map-hover');
  let currentOpenKey = null;

  items.forEach(item => {
    item.addEventListener('click', (event) => {
      const placeKey = item.dataset.placeKey;

      if (currentOpenKey === placeKey) {
        hideMap();
        currentOpenKey = null;
      } else {
        showMap(placeKey);
        currentOpenKey = placeKey;
      }

      event.stopPropagation();
    });
  });

  document.addEventListener('click', () => {
    hideMap();
    currentOpenKey = null;
  });

  const mapEl = document.getElementById('map');
  if (mapEl) {
    mapEl.addEventListener('click', (e) => {
      e.stopPropagation();
    });
  }
});